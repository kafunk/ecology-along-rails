<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <title>Ecology Along the Rails</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <!-- <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.45.0/mapbox-gl.css' rel='stylesheet' /> -->
    <link href='https://api.mapbox.com/mapbox-assembly/v0.21.2/assembly.min.css' rel='stylesheet'>
    <!-- <link href='https://fonts.googleapis.com/css?family=Corben:400|Montserrat:400,700' rel='stylesheet'>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"> -->
    <!-- <link href='css/styles.css' rel='stylesheet' /> -->

    <style>
      body { margin:0; padding:0; }
      #map { position:absolute; top:0; bottom:0; width:100%; }
      .leaflet-control-zoom { opacity: 0.8; }
      /* display none for layout purposes but be careful of license restrictions */
      .mapbox-logo { display: none; }
      /* .inner-wrapper { padding: 6px; } */
      .hydro {}
      .eco {}
      .rail {}
      .selected {}
      .encountered {}
      .encountering {}
      .inner-wrapper { padding: 6px; }
      .flex-parent--space-around { justify-content: space-around; }
      .hide { visisibility: hidden; }
      .unhide { visibility: visible; }
      @media screen and (min-width: 640px) {
        .hide--mm {
          visibility: hidden;
        }
        .unhide--mm {
          visibility: visible;
        }
      }
      @media screen and (min-width: 800px) {
        .hide--ml {
          visibility: hidden;
        }
        .unhide--ml {
          visibility: visible;
        }
      }
      /* @media screen and (min-width: 1200px) {
        .hide--mxl {
          visibility: hidden;
        }
        .unhide--mxl {
          visibility: visible;
        }
      } */
      #display-inline {
        display: inline-block;
      }
      svg icon .inline {
        display: inline-block;
      }
      li { list-style: none;}
    </style>
  </head>

  <body>

    <div class="relative viewport-full scroll-auto">

    <!-- flex-parents and grids defined in vertical and horizontal div wrappers; dynamic sizing via flex-childs and cols added to more semantic, core elements -->

    <!-- main content wrapper (vertical)-->
    <div class="flex-parent flex-parent--column flex-parent--center-cross flex-parent--space-between-main viewport-full scroll-hidden">

      <!-- header stays up top, takes up full width with col-12 -->
      <header class="flex-child flex-child--no-shrink w-full hmin60 bg-red-dark hmax120">
        <!-- inner1-horz-wrapper -->
        <div class="flex-parent flex-parent--space-around flex-parent--center-cross bg-red grid grid--gut12 px12 py12">
          <!-- LEFT: title: always visible, fills horizontal space available -->
          <div class="flex-child col col--11 col--10-mm bg-red--light">
            <!-- inner2-vert-wrapper // flex provides vertical alignment and dynamic 'stacking' of content -->
            <div class="flex-parent flex-parent--column flex-parent--center-main  bg-red-faint grid">
              <!-- COMBAK make txt sizes more dynamic so title doesn't overwhelm small screens // ideally would allow for txt-nowrap on h1 element -->
              <h1 class="txt-h1 flex-child col col--12 col--11-mm col--offl1-mm">Ecology Along the Rails:</h1>
              <h2 class="txt-h2 flex-child col col--11 col--offl1 col--10-mm col--offl2-mm">A visualization of the journeys implicit in passenger train travel within the continental US</h2>
            </div>
          </div>
          <!-- RIGHT: nav/toggle icon: one of children always visible, fills right 1/6ish -->
          <nav class="flex-child col col--1 col--2-mm bg-orange-faint">
            <!-- inner nav wrapper -->
            <div class="flex-parent flex-parent--center-cross flex-parent--center-main bg-orange--light">
              <!-- sometimes visible: 'about this map' link & text -->
              <span class="nav-text bg-orange">
                <!-- visible when big ONLY after #about content collapse -->
                <a class="none" href="<toggle #about>">Read more</a>
              </span>
              <!-- always visible: one of several link/nav icons -->
              <span class="nav-icon bg-orange-dark">
                <!-- question mark or equivalent // visible when small -->
                <a href="#about"><img class="none-ml" src="http://via.placeholder.com/60x60" alt="more info" /></a>
                <!-- collapse icon // visible when big AND not collapsed (including on initial load)-->
                <img class="none inline-block-ml"src="http://via.placeholder.com/60x60" alt="collapse" />
                <!-- expand icon // visible when big ONLY after #sidebar#main content collapse -->
                <img class="none" src="http://via.placeholder.com/60x60" alt="expand" />
              </span>
            </div>
          </nav>
        </div>
      </header>

      <!-- grows vertically in the middle -->
      <main class="flex-child flex-child--grow bg-blue-dark
      w-full h-full">

        <!-- inner-horz-wrapper // combo ensures content stretches to fill space available in both directions -->
        <div class="w-full h-full bg-yellow grid clearfix">

          <!-- MAP PANE // always visible, stretches over up to 12 cols; col combined with flex-child--grow to ensure full width on small screens, but more dynamic/sidebar-content-driven sizing on larger ones -->
          <section id="map-pane" class="col col--12 col--8-ml col--9-mxl bg-green-dark flex-parent flex-parent--center-cross grid relative">

            <div id="map" class="bg-blue-faint">
              <img src="http://via.placeholder.com/1080x800"/>
            </div>

            <!-- MODAL -->
            <div id="modal" class='col col--8 col--offl2 col--offr2 bg-green z3'>
              <!-- Form Wrapper // flex used only for ease of cross+main axis centering -->
              <div class="flex-parent flex-parent--center-cross flex-parent--center-main grid grid--gut0 bg-green-faint">

                <!-- GET START/END FORM -->
                <form id="get-waypoints" action="get" class="flex-child col col--12">
                  <!-- Form inner wrapper // flex only for ease of vertical alignment -->
                  <div class="flex-parent flex-parent--center-cross grid grid--gut0">
                    <!-- Form Header-->
                    <legend class="flex-child col col--12 col--6-mm col--4-ml txt-fancy bg-green-light">Select a Route to Experience</legend>
                    <!-- Fieldset wrapper-->
                    <div class="flex-child col col--12 col--6-mm col--8-ml bg-green-dark">
                      <!-- Get Start -->
                      <fieldset class="w-full align-center bg-green-faint">
                        <label for="start">Where have you come from?</label>
                        <input type="text" id="getStart" name="start" value="Enter origin" list="startList" placeholder="Start..." />
                        <datalist id="startList">
                          <label for="startSuggest">(Some possibilities:)</label>
                          <!-- dropdown1 wrapper -->
                          <div class="select-container">
                            <!-- dropdown1 (start route) -->
                            <select id="startSuggest" class="select start-node" name="altStart">
                              <option value="node#?">Start...</option>
                              <option value="">Chicago</option>
                              <!-- <option>etc</option> -->
                            </select>
                            <div class='select-arrow'></div>
                          </div>
                        </datalist>
                      </fieldset>
                      <!-- Get End -->
                      <fieldset class="w-full align-center bg-green-faint">
                        <label for="end">Where are you going?</label>
                        <input type="text" id="getEnd" name="end" value="Enter destination" list="endList" placeholder="...End" />
                        <datalist id="endList">
                          <label for="endSuggest">(Some possibilities:)</label>
                          <!-- dropdown2 wrapper -->
                          <div class="select-container">
                            <!-- dropdown2 (end route) -->
                            <select id="endSuggest" class="select end-node" name="altEnd">
                              <option value="node#?">...End</option>
                              <option value="">Grand Junction</option>
                              <!-- <option>etc</option> -->
                            </select>
                            <div class='select-arrow'></div>
                          </div>
                        </datalist>
                      </fieldset>
                    </div> <!-- end fieldset wrapper -->
                    <!-- GO button -->
                    <fieldset class="flex-child col col--12">
                      <button id='go' type="submit" class="w-full align-center btn round txt-fancy txt-spacing2" value="go">
                        &#60;&#62; Let's Go &#60;&#62;
                      </button>
                    </fieldset>
                  </div> <!-- end form inner wrapper -->
                </form>

              </div> <!-- end modal inner wrapper -->
            </div> <!-- end modal -->

            <!-- UI Overlay Elements Wrapper -->
            <div class="bg-green-faint col col--12">

              <!-- Custom Data UI Elements -->
              <div class='absolute top left mx6 my6'>
                <button class='btn round btn--purple-light replay'>Replay</button>
                  <!-- keep route choice, reset counter, reset data reveal, begin again -->
                <button class='btn round btn--blue-light play-pause'>Play/Pause</button>
                  <!-- stop/init counter without data resets -->
                <button class='btn round btn--green-light reset-options'>Select New?</button>
                  <!-- prompt user: do you wish to select a new route? + follow through -->
              </div>

              <!-- Basic/Expected Map Elements -->
              <div class='absolute top right mx12 my6'>
                <span>[ + | - ]</span>
                <!-- Attribution -->
              </div>

              <!-- DASHBOARD -->
              <div id="dashboard" class="absolute bottom left right hmin180 bg-purple-faint">
                <!-- inner dash wrapper -->
                <div class="flex-parent flex-parent--space-around flex-parent--stretch-cross grid grid--gut12 clearfix">

                  <!-- Narration -->
                  <div id="narration" class="flex-child col col--12 col--6-mm col--8-ml">
                    <div class="flex-parent flex-parent--column flex-parent--space-between-main flex-parent--center-cross">
                      <!-- header -->
                      <div id="narration-header" class="flex-child flex-child--no-shrink hmin18 hmin24-mm hmin30-ml hmin36-mxl bg-red border-b--2 border--dash">
                        <h5 class="txt-h5 txt-emph txt-fancy align-center">You are currently:</h5>
                      </div>
                      <div id="narration-txt" class="flex-child flex-child--grow">
                        <div class="flex-parent flex-parent--column-reverse">
                          <div id="p3">Traversing special places</div>
                          <div id="p2">Encountering incredible things</div>
                          <!-- <div id="p1"></div> -->
                        </div>
                      </div>
                      <div id="narration-footer" class="flex-child fex-child--no-shrink border-t--2 h6 bg-red"></div>
                    </div>
                  </div> <!-- end of narration -->

                  <!-- Compass + -->
                  <div id="compass-plus" class="flex-child flex-child--grow col col--4 col--6-mm col--4-ml">
                    <div class="flex-parent flex-parent--column flex-parent--stretch-cross flex-parent--center-main">
                      <div id="compass" class="flex-child">
                        compass
                      </div>
                      <div id="plus" class="flex-child">
                        mileage tracker
                        distance remaining
                        time remaining
                        elevation etc
                      </div>
                    </div>
                  </div> <!-- end of compass+ -->

                  <!-- Legend-Log SMALL // no display when big; occupies bottom right 2/3 of dashboard when small -->
                  <div id="legend-log-small" class="flex-child col col--8 none-mm">
                    <div class="flex-parent flex-parent--column flex-parent--space-between-main flex-parent--stretch-cross">
                      <!-- header -->
                      <div id="legend-log-header" class="flex-child flex-child--no-shrink hmin18 hmin24-mm hmin30-ml hmin36-mxl border-b--2 border--dash">
                        <h4 class="txt-h4 align-center">Journey Log</h4>
                      </div>
                      <!-- main content / dynamically populated legend items  -->
                      <div id="legend-log-content" class="flex-child flex-child--grow scroll-auto">
                        <div class="flex-parent flex-parent--column scroll-auto">
                          <div id="legend-log-item" class="flex-child flex-child--no-shrink hmin18 hmin24-mm border-b border--dash">
                            <div class="flex-parent flex-parent--space-between-main flex-parent--center-cross">
                              <span id="log-symbol" class="flex-child flex-child--no-shrink wmin24"></span>
                              <span id="log-name" class="flex-child flex-child--grow"></span>
                              <span id="log-count" class="flex-child flex-child--no-shrink wmin24"></span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- footer / mileage tracker, elevation dataviz?, other extras -->
                      <div id="legend-log-footer" class="flex-child flex-child--no-shrink hmin18 hmin24-mm hmin30-ml hmin36-mxl border-t--2 border--dash bg-red">
                        <div class="flex-parent flex-parent--center-cross bg-orange">
                          <span class="bg-yellow align-r">Rail miles: </span>
                          <span class="bg-green align-l"> [#]</span>
                        </div>
                      </div> <!-- end of legend-log-footer -->
                    </div> <!-- end of legend-log-inner-wrapper -->
                  </div> <!--end of legend-log-small -->

                </div> <!-- end of dashbord-inner-wrapper -->
              </div> <!-- end of dashboard-semantic -->

            </div> <!-- end of ui-overlay-group -->

          </section> <!--end of map pane section -->

          <!-- SIDEBAR / ASIDE -->
          <aside id="sidebar" class="col col--12 col--4-ml col--3-mxl bg-blue-dark fr relative">

            <!-- siderbar inner wrapper -->
            <div class="flex-parent flex-parent--column-ml flex-parent--stretch-cross flex-parent--space-between-main bg-yellow grid grid--gut0 w-full">

              <!-- ABOUT -->
              <div id="about" class="flex-child hmin0 col col--12">
                <!-- flex-child extra shrink? be subsumed -->
                <!-- inner vertical wrapper -->
                <div class='flex-parent flex-parent--column flex-parent--stretch-cross'>
                  <!-- About--Header -->
                  <div class="flex-child flex-child-no-shrink hmin18 hmin0-ml bg-green col col--12">
                    <h3 class="txt-h3">About This Map</h3>
                  </div> <!-- end of about-header -->
                  <!-- About--Main -->
                  <div class="col col--12 flex-child flex-child-grow scroll-auto">
                    <!-- inner content wrapper; flex used only for vertical alignment of child items -->
                    <div class="flex-parent flex-parent--column flex-parent--stretch-cross grid grid--gut24">
                      <!-- main about text, orientation, etc -->
                      <div class='flex-child col col--12 col--6-mm col--12-ml'>
                        <h4 class="txt-h4">Some words</h4>
                        <p>This map visualizes ~~~~~~.</p>
                      </div>
                      <!-- data sources, sub-about, furthermore -->
                      <div class='flex-child col col--12 col--6-mm col--12-ml align-r'>
                        <h5 class='txt-h5'>Data sources etc</h5>
                        <ul class="txt-ul">
                          <li class="txt-li">
                            <a target='_blank' class='link' href='#'>this is how i go</a>
                            <!-- Nested levels of detail? Description, date accessed, processing approach, additional context etc -->
                          </li>
                          <li class="txt-li">
                            <a target='_blank' class='link' href='#'>when i go</a>
                          </li>
                          <li class="txt-li">
                            <a target='_blank' class='link' href='#'>like this</a>
                          </li>
                        </ul>
                      </div>
                    </div> <!-- end of about-main-content-inner-wrapper -->
                  </div> <!-- end of about-main-->
                  <!-- About--Footer -->
                  <div class="flex-child flex-child-no-shrink hmin12 bg-green"></div>
                </div> <!-- end of about-inner-wrapper-->
              </div> <!-- end of about -->

              <!-- Legend-Log // grows vertically as content added on ml+, overtaking #about to the north -->
              <div id="legend-log-big" class="flex-child flex-child--grow hmin180 hmax-full col col--0 col--12-ml bg-orange-dark absolute bottom right none block-ml">
                <!-- REST OF LEGEND LOG CONTENT IS SAME AS LEGEND-LOG SMALL; find a way to access w/o js; html variables?-->
                <div class="flex-parent flex-parent--column flex-parent--space-between-main flex-parent--stretch-cross h-full">
                  <!-- header -->
                  <div id="legend-log-header" class="flex-child flex-child--no-shrink hmin18 hmin24-mm hmin30-ml hmin36-mxl border-b--2 border--dash">
                    <h4 class="txt-h4 align-center">Journey Log</h4>
                  </div>
                  <!-- main content / dynamically populated legend items  -->
                  <div id="legend-log-content" class="flex-child flex-child--grow h-full w-full align-center bg-pink scroll-auto">
                    <div id="legend-log-items-wrapper" class="flex-parent flex-parent--column flex-parent--stretch-cross h-full">
                      <div id="legend-log-item" class="flex-child flex-child--no-shrink hmin18 hmin24-mm border-b border--dash">
                        <div id="legend-log-item-inner-wrapper" class="flex-parent flex-parent--space-between-main flex-parent--center-cross">
                          <span id="log-symbol" class="flex-child flex-child--no-shrink wmin24">sym</span>
                          <span id="log-name" class="flex-child flex-child--grow">name</span>
                          <span id="log-count" class="flex-child flex-child--no-shrink wmin24">#</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- footer / mileage tracker, elevation dataviz?, other extras -->
                  <div id="legend-log-footer" class="flex-child flex-child--no-shrink hmin18 hmin24-mm hmin30-ml hmin36-mxl border-t--2 border--dash bg-red">
                    <div id="legend-log-footer-inner-wrapper" class="flex-parent flex-parent--center-cross flex-parent--stretch-cross bg-orange">
                      <span class="bg-yellow align-r">Rail miles: </span>
                      <span class="bg-green align-l"> [#]</span>
                    </div>
                  </div> <!-- end of legend-log-footer -->
                </div> <!-- end of legend-log-inner-wrapper -->
              </div> <!-- end of legend-log-big --> -->

            </div> <!-- end of sidebar-inner-wrapper -->

          </aside> <!-- end of sidebar section -->

        </div> <!-- end of main-innerwrapper -->
      </main> <!-- end of main -->

      <!-- footer stays on the bottom at full width -->
      <footer class="flex-child flex-child--no-shrink hmin36 w-full bg-purple-dark">
        <!-- inner horizontal grid wrapper; flex used only for vertical alignment -->
        <div class='flex-parent flex-parent--center-cross grid grid--gut18'>
          <!-- author name, NMP link? -->
          <div class='flex-child col col--6 col--5-mm'>
            <p class='align-r'>Map authored by
              <a target='_blank' class='link' href='https://kafunk.github.io'>Katrina Funk</a> in partial fulfilment of MAP 673 // <a target='_blank' class='link' href='https://newmapsplus.uky.edu'> &#60;&#62; &#60;&#62; &#60;&#62; New Maps Plus &#60;&#62; &#60;&#62; &#60;&#62; </a>.
            </p>
          </div>
          <!-- break/divider icon -->
          <div class="flex-child col col--0 col--2-mm">
            <div id='compass-icon' class="align-center">
              <img style="border-radius:50%" src="http://via.placeholder.com/60x60"/>
            </div>
          </div>
          <!-- social media --> <!-- TODO ADD REAL LINKS-->
          <div class="flex-child col col--6 col--5-mm">
            <ul class="txt-ul">
              <li class="txt-li">
                <svg class='icon inline mb-neg3'><use xlink:href='#icon-github'/></svg>
                <a target="_blank" href="#">@kafunk</a>
              </li>
              <li class="txt-li">
                <svg class='icon inline mb-neg3'><use xlink:href='#icon-twitter'/></svg>
                <a target="_blank" href="#">@kafunkafunk</a>
              </li>
                <svg class='icon inline mb-neg3'><use xlink:href='#icon-mail'/></svg>
                <a target="_blank" href="#">kafunk@gmail.com</a>
              </li>
              <!-- <li class="txt-li">
                <i class="icon fab fa-instagram"></i></li>
              </li>
              <li class="txt-li">
                <i class="icon fab fa-spotify"></i></li>
              </li> -->
              <!-- Spotify,Pinterest,Dribbble,LinkedIn -->
            </ul>
          </div>
        </div>
      </footer>

    </div>  <!-- end body inner wrapper -->


<!---~~~=== JAVASCRIPT ===~~~--->

  <!-- load Assembly -->
  <script async defer src='https://api.mapbox.com/mapbox-assembly/v0.21.2/assembly.js'></script>
  <!-- load MapboxGL -->
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.45.0/mapbox-gl.js'></script>
  <!-- load Turf.js -->
  <script src='https://npmcdn.com/@turf/turf/turf.min.js'></script>
  <!-- load Simple Statistics -->
  <script src="https://unpkg.com/simple-statistics@6.0.1/dist/simple-statistics.min.js"></script>
  <!-- load D3 -->
  <script src="https://d3js.org/d3.v5.js"></script>
  <script src="https://unpkg.com/topojson@3"></script>
  <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
  <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
  <!-- HERE Routing API -->
  <script src="http://js.api.here.com/v3/3.0/mapsjs-core.js"></script>
  <script src="http://js.api.here.com/v3/3.0/mapsjs-service.js"></script>
  <!-- load custom script -->
  <script src="js/app.js"></script>

</body>
</html>

<!-- ALL COLORS TEMPORARY using only for layout distinction testing -->
            <!-- flex wrapper used for ease of vertical alignment-->
            <!-- inner2-horz-wrapper // flex provides vertical alignment -->
            <!-- inner2-vert-wrapper // flex provides vertical alignment and dynamic 'stacking' of content -->
<!-- make consistent use of single of double quotes within markup -->
<!-- css classes to define: .txt-fancy (form legend) -->

<!--
<button class="collapse-trigger" aria-expanded="true" aria-controls="collapse-2">
  ::before
  Examples
</button>
PLUS event listener on button
<div id="collapse-2" class="collapsible" aria-hidden="false"><p>text etc</p></div>
function() {
  toggleCollapse(this)
}
can interpolate between visible and not-visible!
.visible {
  visibility: visible;
}

.not-visible {
  visibility: hidden;
}    function toggle_visibility(id) {
       var e = document.getElementById(id);
       if(e.style.display == 'block')
          e.style.display = 'none';
       else
          e.style.display = 'block';
    }

      <!-- <div id="basic-map-element-wrapper" class='absolute top right flex-parent flex-parent--center-cross flex-parent--end-main'> -->
      <!-- <div id="small-custom-map-ui-wrapper" class='absolute top left flex-parent flex-parent--center-cross'> -->
      <!-- <div id="go-btn-wrapper" class="inner-wrapper flex-parent flex-parent--center-cross flex-parent--center-main"> -->
      <!-- <"mx-auto flex-parent flex-parent--stretch-cross flex-parent--center-cross flex-parent--space-between-main viewport-third"> -->
